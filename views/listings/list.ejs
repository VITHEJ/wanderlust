<% layout('/layouts/boilerplate.ejs') -%>
<body>
    <div class="listing-card col-6 offset-3">
          <img src="<%= list.image.url %>" class="card-img-top view-img" alt="..." >
  
          <div class="card-body">
    <p class="card-text"><b><%= list.title %></b><br>
 <%= list.description %> <br>
<i>Price: </i><span>&#x20B9</span><%= list.price.toLocaleString('en-IN') %>/Night<br>
<i>Location: </i><%= list.location %> <br>
<i>Country: </i><%= list.country %><br>

<div class="btns">
    <form method="get" action="/listings/<%= list._id %>/edit">
        <button class=" btn cols-3 offset-2" style="background-color:rgb(247, 55, 55);">Edit</button>
        
    </form>
    
    <form method="get" action="/listings/<%= list._id %>/delete">
        <button class="btn cols-4 offset-5 btn-dark">Delete</button>
    </form>
</div>

   <hr>
   <% if(currUser){ %>
   <p><b>Give A Review</b></p>
   <form method="post" action="/listings/<%= list._id %>/review">
            <div class="mb-3 mt-3">    
                <fieldset class="starability-slot">
  <input type="radio" id="no-rate" class="input-no-rate" name="review[rating]" value="1" checked aria-label="No rating." />
  <input type="radio" id="first-rate1" name="review[rating]" value="1" />
  <label for="first-rate1" title="Terrible">1 star</label>
  <input type="radio" id="first-rate2" name="review[rating]" value="2" />
  <label for="first-rate2" title="Not good">2 stars</label>
  <input type="radio" id="first-rate3" name="review[rating]" value="3" />
  <label for="first-rate3" title="Average">3 stars</label>
  <input type="radio" id="first-rate4" name="review[rating]" value="4" />
  <label for="first-rate4" title="Very good">4 stars</label>
  <input type="radio" id="first-rate5" name="review[rating]" value="5" />
  <label for="first-rate5" title="Amazing">5 stars</label>
</fieldset>

            </div>
    <div class="mb-3 mt-3">
            <label for="comment" class="form-label">Comment</label> 
       <textarea class="form-control" id="comment" rows="3" name="review[comment]" required></textarea>
        <div class="invalid-feedback">Please Give A comment</div>
    </div>   
    
    <button class="btn btn-dark mt-3">Submit</button>  </form>
   </div>
   <hr>
  <% } %>
   <% if(list.review.length){%>
    <p><b>All Reviews</b></p>
    <% } %>
   <div class="row">
<% for(review of list.review) {%>
    <div class="review-card col-5 ms-4 mb-3 ">
        <h5 class="card-title mt-2"><%=review.author.username%></h5>
        <br>
       
        
<h6 class="card-text"><p class="starability-result" data-rating='<%= review.rating %>'><%=review.rating%></p></h6>
<p class="card-text"><%=review.comment%></p>
<form method="post" action="/listings/<%= list._id%>/review/<%= review._id %>?_method=DELETE">

   <button class="btn btn-sm btn-dark mb-3">Delete</button>
   
 
</form>
    </div>
    <% } %>
   </div>

    </p>
  </div>
  </div>

    
   
  

    
</body>
